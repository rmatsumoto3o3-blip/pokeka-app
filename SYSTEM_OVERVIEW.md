# ポケカ対戦記録・デッキ管理システム (仮称: 松本さんの巣) システム仕様書

## 1. 概要
本システムは、ポケモンカードゲームのプレイヤーが「デッキの調整履歴」と「対戦成績」を効率的に管理し、勝率向上を目指すためのWebアプリケーションです。

## 2. コアコンセプト
- **バージョン管理**: デッキを単なる「リスト」ではなく、「調整の歴史（バージョン）」として管理します。
- **階層構造**: 似たデッキを「フォルダ（アーキタイプ）」でまとめ、微調整を「バリエーション」として紐付けます。
- **シームレスな移行**: 公式デッキ作成ツールとの連携を前提としつつ、アプリ内での独自のカスタム調整も可能です。

## 3. 主要機能

### 3.1 デッキ管理 (Deck Management)
ユーザーは以下の階層構造でデッキを管理します。

1.  **デッキフォルダ (Archetype)**
    *   **役割**: 「リザードンex」「ドラパルトex」などのデッキタイプごとのコンテナ。
    *   **機能**: フォルダ全体の勝率集計、バリエーションの整理。
2.  **デッキバリエーション (Variant)**
    *   **役割**: 実際に使用する個別のデッキリスト（例: v1.0, v1.1 ビーダル型）。
    *   **登録方法**:
        *   **公式デッキコード**: ポケモンカード公式チャンネルのデッキコードからインポート。
        *   **カスタムビルド**: アプリ内で調整・保存した独自の構築。
    *   **機能**: バージョンごとの勝率記録、調整履歴（バージョン管理）。

### 3.2 対戦記録 (Match Recording)
- **記録項目**: 勝敗、対戦相手のデッキタイプ、先攻/後攻、メモ。
- **集計**:
    *   デッキごとの勝率
    *   フォルダ（アーキタイプ）ごとの勝率
    *   直近の戦績推移

### 3.3 一人回し・検証 (Solo Play / Practice)
- **バトルシミュレータ**:
    *   ブラウザ上でカードを並べ、初動の確認や一人回しを行う簡易シミュレータ機能。
    *   対戦相手がいなくてもデッキの事故率などを確認可能。

| プラン | フォルダ数 (親) | デッキ数 (バリエーション) | 備考 |
| :--- | :--- | :--- | :--- |
| **All Users** | 無制限 | 無制限 | 現在の仕様 |

*※以前の利用制限は撤廃されました。*

## 4. 技術スタック
- **Frontend**: Next.js (App Router), React, Tailwind CSS
- **Backend**: Supabase (PostgreSQL, Auth, RLS)
- **Deploy**: Vercel (想定)

## 5. 今後の拡張予定 (Roadmap)
- スマホ版UIの最適化 (Mobile Polish)
- バトルシミュレータの盤面操作機能強化
- 対戦履歴のグラフ化・詳細分析
